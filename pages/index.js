import Head from "next/head"
import styles from "../styles/Home.module.css"
import MovieCategory from "../components/movies/MovieCategory"
import TvShowCategory from "../components/tvShows/TvShowCategory"
import { getMovies, getTvShows } from "../utils"

export default function Home({ allMovies, allTvShows }) {

  // Make a trending component
  // Think how to get the category of movies .
  

// Todo:
  // What am thinking is that every Card component should have button on hover of 
  // bookmark svg and onClick of that should the item to bookmarks array.

  // Then bookmarks page on every card component it should have a button for delete form 
  //  bookmark onCLick of it should remove the item from bookmarks array


  // then adding context for favourites shows and movies and adding localstorage

  // Adding Loading States and Cleaning the look

  // Fucking the Code Tiding and Clean , reuse and DRY . I know that You can do it alot better.


  return (
    <>
      <Head>
        <title>Entertainment App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={styles.container}>
        {allMovies.map((movies) => {
          return <MovieCategory data={movies} />
        })}

        {allTvShows.map((tvShows) => {
          return <TvShowCategory data={tvShows} />
        })}
      </main>
    </>
  )
}

export const getStaticProps = async () => {
  const allMoviesData = await getMovies()
  const alltvShowsData = await getTvShows()

  const allMovies = allMoviesData.map((movie) => movie.data.results)
  const allTvShows = alltvShowsData.map((tvShow) => tvShow.data.results)


  return {
    props: {
      allMovies,
      allTvShows,
    },
  }
}

